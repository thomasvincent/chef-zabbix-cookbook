# Systemd service override for Apache HTTP Server
# Generated by Chef for <%= node['fqdn'] %>
# Local modifications will be overwritten.

[Service]
# Increase timeout for startup and shutdown
<% if @timeout_start_sec %>
TimeoutStartSec=<%= @timeout_start_sec %>
<% end %>
<% if @timeout_stop_sec %>
TimeoutStopSec=<%= @timeout_stop_sec %>
<% end %>

# Restart settings
<% if @restart_sec %>
RestartSec=<%= @restart_sec %>
<% end %>

# File descriptor limits
<% if @limit_nofile %>
LimitNOFILE=<%= @limit_nofile %>
<% end %>

# Memory limits
<% if @memory_limit %>
MemoryLimit=<%= @memory_limit %>
<% end %>

# CPU quota
<% if @cpu_quota %>
CPUQuota=<%= @cpu_quota %>
<% end %>

# Ensure we can handle high memory pressure
OOMScoreAdjust=-500